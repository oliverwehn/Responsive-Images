!function(a,b,c,d){"use strict";var e="responsiveImages",f={respondToResize:!1,respondToUpscaleOnly:!0,useParentWidth:!0,resolutionInterval:50,imgSelector:"img",loadingClass:null,isMobile:!1,callOnUpdate:null,callOnEach:null,debug:!1};a.responsiveImages=function(b,c){var d=a(b);this.options=a.extend({},f,c),this.$images=d.find(this.options.imgSelector),0==this.$images.length&&(this.$images=d.filter(this.options.imgSelector)),this._defaults=f,this._name=e,this.loading=0,this.initialized=!1,this.window=this.getWindowSize(),this.init()},a.responsiveImages.prototype={init:function(){if(this.debugLog("Initializing Responsive Images ..."),this.updatePaths(),this.options.respondToResize){this.resizeTimer=null;var c=this;a(b).on("resize orientationchange",function(){null!==c.resizeTimer&&b.clearTimeout(c.resizeTimer),c.resizeTimer=b.setTimeout(function(){c.callOnResize.call(c),c.resizeTimer=null},500)})}0===this.$images.length&&(this.initialized=!0),this.callOnInit()},append:function(b,c){var d=a(b),e=[],f=this;d.each(function(){a(this).find("img").each(function(){f.$images=f.$images.add(a(this)),e.push(a(this))})}),c=c||!0;var g=a(e.map(function(a){return a[0]}));this.$images.add(g),this.debugLog("Appended "+g.length+" images, new count: "+this.$images.length+"."),c&&this.updatePaths(g)},updatePaths:function(c){this.debugLog("Going to update paths.");var e=this;c=c||e.$images;var f=e.options,g=0;g=typeof b.orientation!==d?Math.ceil((90===b.orientation||-90===b.orientation?screen.height:screen.width)/f.resolutionInterval)*f.resolutionInterval:Math.ceil(screen.width/f.resolutionInterval)*f.resolutionInterval,e.debugLog("Starting to process "+c.length+" images."),c.length>0?c.each(function(b,c){e.processImage(a(c))}):e.callOnUpdate()},processImage:function(c){for(var e=this,f=e.options,g=c.parent(),h=0,i=this.getWindowSize().width,j=Math.round(b.devicePixelRatio)||1,k="?"+Math.round((new Date).getTime()/1e4);typeof g.css!==d&&"block"!==g.css("display");)g=g.parent();typeof g.width!==d&&(h=Math.ceil(g.width()/f.resolutionInterval)*f.resolutionInterval),h<c.width()&&(h=Math.ceil(c.width()/f.resolutionInterval)*f.resolutionInterval);var l="",m=c.attr("src");if(e.options.isMobile?((l=c.data("mobile-src"))||(l=c.data("src"))||(l=c.attr("data-mobile-src")||c.attr("src"),c.data("mobile-src",l)),c.addClass("mobile")):(c.hasClass("mobile")&&c.removeClass("mobile"),(l=c.data("src"))||(l=c.attr("src"),c.data("src",l).removeAttr("src"))),l){var n=c.data("width")||null;if(null===n||null!==n&&(h>0&&f.useParentWidth&&h>n||(0===h||!f.useParentWidth)&&i>n)){var o=e.getURL(l,{swidth:i,pwidth:h,pxratio:j});if(o+=k,m!==o){e.debugLog("Processing "+l),e.options.loadingClass&&c.addClass(e.options.loadingClass);var p=new Image;a(p).load(function(){e.debugLog("Responsive Images: Finished loading image "+this.src+". "+e.loading+" to go!");var b=0;b=typeof this.naturalWidth!==d?this.naturalWidth:this.width,b/=j,c.attr("src",a(this).attr("src")).data("width",b),e.loading-=1,e.options.loadingClass&&c.removeClass(e.options.loadingClass),"function"==typeof e.options.callOnEach&&e.options.callOnEach.call(e,c),0===e.loading&&e.callOnUpdate()}).attr("src",o),e.loading+=1,e.debugLog("Responsive Images: Initiated loading image "+e.loading+": "+o),e.initialized||(e.initialized=!0)}}}},getWindowSize:function(){var a=Math.abs(b.orientation);return{width:90===a?screen.height:screen.width,height:90===a?screen.width:screen.height,orientation:b.orientation||0}},getURL:function(a,b){var c=b.swidth||0,d=b.pwidth||0,e=b.pxratio||1,f=a.replace(/(\.[a-z]+)$/,".s"+c+".p"+d+".r"+e+"$1");return f},callOnInit:function(){"function"==typeof this.options.callOnInit&&(this.options.callOnInit.call(this),this.debugLog("Responsive Images: Callback on initialization was called."))},callOnUpdate:function(){"function"==typeof this.options.callOnUpdate&&(this.options.callOnUpdate.call(this,this.$images,this.initialized),this.debugLog("Responsive Images: Callback on update was called."))},callOnResize:function(){var a=this.getWindowSize();(a.width>this.window.width||!this.respondToUpscaleOnly)&&this.updatePaths()},debugLog:function(a){this.options.debug&&console.log(a)}},a.fn[e]=function(b){b=b||{},b.debug&&console.log("Called Responsive Images constructor on "+(this.length>1?this.length+" elements":this[0].tagName+(this.attr("id")?"#"+this.attr("id"):"")+(this.attr("class")?"."+this.attr("class").split(" ").join("."):"")));var c=null;if("object"==typeof b)return c=b.reset?null:a.data(this,"plugin_"+e),c||(c=new a.responsiveImages(this,b),a.data(this,"plugin_"+e,c)),this;if(c=a.data(this,"plugin_"+e),c&&"function"==typeof a.responsiveImages.prototype[b]){var d=Array.prototype.slice.call(arguments,1);return a.responsiveImages.prototype[b].apply(c,d)}return null}}(jQuery,window,document);
//# sourceMappingURL=jquery.responsiveimages.min.map